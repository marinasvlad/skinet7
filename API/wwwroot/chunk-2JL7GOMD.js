import{a as b}from"./chunk-CGWCJNGL.js";import{J as N,P as O,e as s,f as y,g as C,h as $,i as j,j as S,l as F,m as x,r as B}from"./chunk-GEML6WPG.js";import{B as _,Ca as v,Cb as V,Da as q,Eb as h,H as c,Hb as E,N as u,O as f,Pa as d,Ra as k,ea as n,fa as p,ib as P,jb as U,ma as I,oa as a,q as R,qb as L,sa as m,ta as l,ua as g,w as D,x as G,z as M}from"./chunk-6O4OQCOI.js";var z=(()=>{let t=class t{constructor(o,i,r){this.accountService=o,this.router=i,this.activatedRoute=r,this.loginForm=new $({email:new j("",[s.required,s.email]),password:new j("",s.required)}),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl)})}};t.\u0275fac=function(i){return new(i||t)(p(b),p(h),p(V))},t.\u0275cmp=u({type:t,selectors:[["app-login"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","type","label"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"]],template:function(i,r){i&1&&(m(0,"div",0)(1,"div",1)(2,"form",2),v("ngSubmit",function(){return r.onSubmit()}),m(3,"div",3)(4,"h1",4),d(5," Login "),l()(),g(6,"app-text-input",5)(7,"app-text-input",6),m(8,"div",7)(9,"button",8),d(10,"Sign in"),l()()()()()),i&2&&(n(2),a("formGroup",r.loginForm),n(4),a("formControl",r.loginForm.controls.email)("label","Email address"),n(),a("formControl",r.loginForm.controls.password)("type","password")("label","Password"),n(2),a("disabled",r.loginForm.invalid))},dependencies:[S,y,C,F,x,N]});let e=t;return e})();function X(e,t){if(e&1&&(m(0,"li"),d(1),l()),e&2){let w=t.$implicit;n(),k(" ",w," ")}}function Y(e,t){if(e&1&&(m(0,"ul",10),I(1,X,2,1,"li",11),l()),e&2){let w=q();n(),a("ngForOf",w.errors)}}var A=(()=>{let t=class t{constructor(o,i,r){this.fb=o,this.accountService=i,this.router=r,this.errors=null,this.complexPassword="(?=^.{6,10}$)(?=.*d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*s).*$",this.registerForm=this.fb.group({displayName:["",s.required],email:["",[s.required,s.email],[this.validateEmailNotTaken()]],password:["",[s.required,s.pattern(this.complexPassword)]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>this.router.navigateByUrl("/shop"),error:o=>this.errors=o.errors})}validateEmailNotTaken(){return o=>o.valueChanges.pipe(D(1e3),G(1),_(()=>this.accountService.checkEmailExists(o.value).pipe(R(i=>i?{emailExists:!0}:null),M(()=>o.markAsTouched()))))}};t.\u0275fac=function(i){return new(i||t)(p(B),p(b),p(h))},t.\u0275cmp=u({type:t,selectors:[["app-register"]],decls:13,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","type","label"],["class","text-danger list-unstyled",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(i,r){i&1&&(m(0,"div",0)(1,"div",1)(2,"form",2),v("ngSubmit",function(){return r.onSubmit()}),m(3,"div",3)(4,"h1",4),d(5," Sign up "),l()(),g(6,"app-text-input",5)(7,"app-text-input",5)(8,"app-text-input",6),I(9,Y,2,1,"ul",7),m(10,"div",8)(11,"button",9),d(12,"Sign up"),l()()()()()),i&2&&(n(2),a("formGroup",r.registerForm),n(4),a("formControl",r.registerForm.controls.displayName)("label","Display Name"),n(),a("formControl",r.registerForm.controls.email)("label","Email address"),n(),a("formControl",r.registerForm.controls.password)("type","password")("label","Password"),n(),a("ngIf",r.errors),n(2),a("disabled",r.registerForm.invalid))},dependencies:[P,U,S,y,C,F,x,N]});let e=t;return e})();var tt=[{path:"login",component:z},{path:"register",component:A}],Z=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t}),t.\u0275inj=c({imports:[E.forChild(tt),E]});let e=t;return e})();var bt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f({type:t}),t.\u0275inj=c({imports:[L,Z,O]});let e=t;return e})();export{bt as AccountModule};
